<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Prompts</title>
  <link rel="stylesheet" href="/static/global.css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/static/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon-16x16.png">
  <link rel="manifest" href="/static/images/site.webmanifest">
  <style>
    .img-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .img-card{background:#0b1220;border:1px solid var(--border);border-radius:12px;overflow:hidden;cursor:pointer}
    .img-card img{display:block;width:100%;height:180px;object-fit:cover}
    .img-card h3{margin:10px 12px 12px;font-size:16px}
    .modal-img{max-width:100%;height:auto;border-radius:8px;margin-bottom:12px}
    .copy-box{background:#0b1220;border:1px solid var(--border);border-radius:10px;padding:12px;white-space:pre-wrap}
  </style>
  <script>
    async function loadImagePrompts(){
      try{
        const res = await fetch('/api/image-prompts/').then(r=>r.json());
        const list = res.items || [];
        const grid = document.getElementById('img-grid');
        grid.innerHTML = '';
        list.forEach(item => grid.appendChild(createCard(item)));
      }catch(e){ console.error(e); }
    }
    function createCard(item){
      const wrap = document.createElement('div');
      wrap.className = 'img-card';
      const img = document.createElement('img');
      img.src = item.imageUrl || '';
      const title = document.createElement('h3');
      title.textContent = item.title || 'Image Prompt';
      wrap.appendChild(img); wrap.appendChild(title);
      wrap.addEventListener('click', ()=> openModal(item));
      return wrap;
    }
    function openModal(item){
      const modal = document.getElementById('prompt-modal');
      const title = document.getElementById('prompt-modal-title');
      const content = document.getElementById('prompt-modal-content');
      const img = document.getElementById('prompt-modal-image');
      title.textContent = item.title || 'Image Prompt';
      img.src = item.imageUrl || '';
      content.textContent = String(item.prompt || '');
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
    }
    function closeModal(){
      const modal = document.getElementById('prompt-modal');
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
    }
    async function copyPrompt(){
      try{ await navigator.clipboard.writeText(document.getElementById('prompt-modal-content').textContent); }catch(_e){}
    }
    document.addEventListener('DOMContentLoaded', loadImagePrompts);
  </script>
</head>
<body class="theme-dark">
  <header class="site-header">
    <div class="container">
      <h1 class="brand"><a href="/hub/" class="brand-link" style="text-decoration:none;color:inherit">PromptHub</a></h1>
    </div>
  </header>

  <main class="container section">
    <h2 class="section-title">Image Prompts</h2>
    <p class="section-sub">Click an image to view and copy the prompt</p>
    <div id="img-grid" class="img-grid"></div>
  </main>

  <div id="prompt-modal" class="modal" aria-hidden="true" role="dialog">
    <div class="modal-card">
      <button class="modal-close" onclick="closeModal()">âœ•</button>
      <h3 id="prompt-modal-title" class="modal-title"></h3>
      <img id="prompt-modal-image" class="modal-img" alt="preview" />
      <pre id="prompt-modal-content" class="copy-box"></pre>
      <div class="modal-actions">
        <button class="copy-btn" onclick="copyPrompt()">Copy</button>
      </div>
    </div>
  </div>
</body>
</html>


